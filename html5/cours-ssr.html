<!DOCTYPE HTML>
<!-- <html lang="en-US"> -->
<html lang="en-US" class="fade">
<!-- 
  ^ a class of "fade" makes slides fade smoothly into one another
 -->
<!-- <html lang="en-US" class="nonumbers"> -->
<!-- 
  If you want no numbers on the slides add a "nonumbers" class 
  to the HTML element.
  Adding a class of "fade" will make slides fade into another. 
-->
<head>
  <meta charset="UTF-8">
  <title>Construire la sécurité d'un système mobile dans l'écosystème web : Firefox OS</title>
<!-- 
  If you upload your slides to the web, ensure that you have 
  a good title - this shows up in search results and social
  media links
 -->
  <meta name="viewport" content="width=device-width, user-scalable=yes">
  <link rel="stylesheet" href="themes/mozilla/styles/style.css">
</head>
<body class="list">
  <header class="caption">
    <h1></h1>
    <p class="footer">
      Stéphanie Ouillon, 
      <a href="http://twitter.com/">@steph_ouillon</a> or 
      <a href="mailto:you@email.com">stephouillon@mozilla.com</a>
    </p>
  </header>
  <aside class="talkdescription">
    <p>This slide deck is using the shower system - roll over the previews to see the notes and click any slide to go into presentation mode. Then use keys to navigate. <button onclick="goFullScreen()">Go fullscreen</button></p>
    <p class="abstract">
      <strong>Abstract: </strong>
      Construire la sécurité d'un système mobile dans l'écosystème web : Firefox OS
    </p>
  </aside>

  <div id="cover" class="slide"><div>
    <section>
      <header>
      <h2><center><strong>La securite de Firefox OS</strong></center></h2>
      </header>
      <img src="pictures/cours-ssr/firefoxos_mascot.png" 
           class="middle" height="380"
           alt="">
      <small class="byline">
        Stéphanie Ouillon, Télécom SudParis, 15 janvier 2014
      </small>
      <small class="credits">
        <a href="">
          credits
        </a>
      </small>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="securityteam" class="slide"><div>
    <section>
      <header>
      <h2><center>Mozilla</center></h2>
      </header> 
      <img src="pictures/cours-ssr/firefoxos.png" 
           class="right" 
           height="350" 
           alt="Firefox OS phones">
         </small>
         <p>Equipe Sécurité de <strong>Firefox OS</strong></p>   
      <p>Nouvel <strong>OS mobile</strong> construit autour du <strong>web</strong></p>
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="menu" class="slide"><div>
    <section>
    <header>
      </header>
    <ul class="nobull">
      <li><strong>1. Firefox OS</strong></li>
        <ul>
          <li>Introduction</li>
          <li>Architecture</li>
        </ul>
      <li><strong>2. Sécurité</strong></li> 
        <ul>
          <li>Hardware</li>
          <li>Système</li>
          <li>Applications</li>
        </ul> 
      <li><strong>3. TP</strong></li>  
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    


  <div id="firefoxos" class="slide oneline"><div>
    <section>
    <header>
      <h2>1. Firefox OS</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  
  <div id="openweb" class="slide"><div>
    <section>
    <header>
      <h2><center>Open Web</center></h2>
      </header>
    <p>Le web ouvert comme plateforme mobile</p>
    <ul>
      <li>Technologies Web : apps "natives" en <strong>HTML/JavaScript/CSS</strong></li>
      <li>Moteur de rendu <strong>Gecko</strong> (le même que pour Firefox)</li>
      <li><strong>APIs web</strong> (JS) pour accéder aux functionnalités "natives" (accès caméra, carte SD, géolocalisation...)</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="libre" class="slide"><div>
    <section>
    <header>
      <h2><center>Installation</center></h2>
      </header>
      <ul class="nobull">
        <li><strong>Le code</strong> :
         <ul>
           <li>Mozilla Central: <a href="https://mxr.mozilla.org/">https://mxr.mozilla.org/</a> (Mercurial)</li>
           <li>Scripts sur GitHub: <a href="https://github.com/mozilla-b2g/B2G">https://github.com/mozilla-b2g/B2G</a></li>
         </ul>
        </li>
        <li><strong>La doc</strong> :
          <ul>
            <li>MDN: <a href="https://developer.mozilla.org">https://developer.mozilla.org</a></li>
         </ul>
       </li> 
       <li><strong>Hardware compatible </strong>: cf <a href="https://developer.mozilla.org/en-US/Firefox_OS/Firefox_OS_build_prerequisites">MDN</a></li>
       </li>
       <li><strong>Simulateurs </strong>: 
         <ul class="nobull">
           <li>Client dans le navigateur</li>
           <li>Emulateur (ARM)</li>
           <li>Add-on dans l'App Manager</li>
         </ul>
       </li>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="app-manager2" class="slide cover w"><div>
    <section>
      <header>
      </header> 
      <img src="pictures/cours-ssr/app-manager.png" 
           class="right" 
           alt="App-Manager screenshot">
      <footer class="notes">
      </footer>
    </section>
  </div></div>

  <div id="browser" class="slide oneline"><div>
    <section>
    <header>
      <h2>Architecture</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   
  
  <div id="fxos-simple-architecture" class="slide cover h"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/fxos_simple_architecture.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="gaia-intro" class="slide"><div>
    <section>
    <header>
      <h2>Gaia</h2>
      </header>

    <ul class="nobull">
      <li><strong>Interface utilisateur</strong> (UI)</li>
      <ul>
        <li>Entièrement écrite en HTML/CSS/JS</li>
      </ul>
      <li><strong>Applications utilisateur</strong></li>
      <li><strong>Applications système</strong></li>
        <ul>
          <li>Appels, SMS, E-mails</li>
          <li>Caméra, radio, musique</li>
          <li>Navigateur web</li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="app-sec-1" class="slide"><div>
    <section>
    <header>
      <h2>Applications Web</h2>
      </header>
    <ul class="nobull">
      <li><strong>Application Firefox OS = Web App</strong></li> 
      <ul>
        <li>Application "hostée" ou "packagée"</li>
      </ul>
      <li><strong>Sécurité d'une appli web</strong></li>
      <ul>
        <li>Content Security Policy (CSP)</li>
        <li>DOM-based XSS</li>
        <li>Input/output data sanitization & escaping</li>
        <li>etc.</li>
        <li>(on y reviendra)</li>
      </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="archi1" class="slide"><div>
    <section>
      <header>
        <h2>Architecture</h2>
        <h3>Un site web classique</h3>
      </header>
      
      <img src="pictures/cours-ssr/schema-1@2x.png" 
           alt="Site Web" 
           class="middle" height="134" style="background:#000;border-radius:5px;padding:2em;">

           <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="archi2" class="slide"><div>
    <section>
      <header>
        <h2>Architecture</h2>
        <h3>Un site web moderne</h3>
      </header>
      
      <img src="pictures/cours-ssr/schema-2@2x.png" 
           alt="Site Web" 
           class="middle" height="134" style="background:#000;border-radius:5px;padding:2em;">

           <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="archi3" class="slide"><div>
    <section>
      <header>
        <h2>Architecture</h2>
        <h3>Une application web</h3>
      </header>
      
      <img src="pictures/cours-ssr/schema-3@2x.png" 
           alt="Site Web" 
           class="middle" height="163" style="background:#000;border-radius:5px;padding:2em;">

      <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="archi4" class="slide"><div>
    <section>
      <header>
        <h2>Architecture</h2>
        <h3>Une application web « packagée »</h3>
      </header>
      
      <img src="pictures/cours-ssr/schema-4@2x.png" 
           alt="Site Web" 
           class="middle" height="275" style="background:#000;border-radius:5px;padding:2em;margin-top:1em;">

      <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
      <footer class="notes"></footer>
    </section>
  </div></div>

  <div id="apis-permissions" class="slide"><div>
    <section>
      <header>
        <h2>APIs et permissions</h2>
      </header>
      <ul>
        <li>L'accès à une fonctionnalité matérielle passe toujours par une
        API</li>
        <li>L'appel à cette API peut être autorisée ou non, au cas par cas</li>
        <ul class="nobull">
          <li>accord de l'utilisateur</li>
          <li>accord implicite</li>
          <li>application installée ou non</li>
        </ul>
      </ul>
      <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
      <footer class="notes">
        Parler de la pollution du Web.
      </footer>
    </section>
  </div></div>

  <div id="apis-desc" class="slide"><div>
    <section>
    <header>
      <h2>Permissions</h2>
      </header>

    <p>L'application doit être</p>  
    <ul class="nobull">
      <li><strong>certifiée</strong></li>
      <li>ou <strong>privilégiée</strong></li>
      <li>ou <strong>hébergée</strong></li>
      <li>ou simplement <strong>accessible sur le web</strong></li>
    </ul>
    <p>pour utiliser une API.</p>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="apis" class="slide cover w"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/APIs.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="zomgopenapps" class="slide"><div>
    <section>
      <header>
        <h2>Passer d'un site web à une application Firefox OS</h2>
        </header>
        <p>Ajouter un <strong>manifeste</strong>.</p>
        <ul>
          <li>Fichier JSON</li>
          <li>Contient les infos nécessaires au navigateur pour intéragir avec l'app</li>
        </ul> 
    <footer class="notes">
    </footer>
    </section>
  </div></div>

  <div id="manifest" class="slide"><div>
    <section>
      <header>
        <h2>manifest.webapp (version soft)</h2>
      </header>
      <pre>
        <code>{</code>
        <code>  "name": "My App",</code>
        <code>  "description": "My elevator pitch goes here",</code>
        <code>  "launch_path": "/",</code>
        <code>  "icons": { "128": "/img/icon-128.png" },</code>
        <code>  "developer": {</code>
        <code>    "name": "Your name or organization",</code>
        <code>    "url": "http://your-homepage-here.org"</code>
        <code>  }</code>
        <code>}</code>
      </pre>
      <p class="demourl"><a href="https://developer.mozilla.org/en-US/docs/Apps/Manifest">App manifest</a></p>
      <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
    <footer class="notes">
      Gotcha: bien configurer le mime type et les expirations
    </footer>
    </section>
  </div></div>

  <div id="threekinds" class="slide"><div>
    <section>
      <header>
        <h2>Types d'application&hellip;</h2>
      </header>
      <ul class='longlist'>
        <li><mark>Contenu Web</mark> - sans privilèges particuliers, mais permet
        tout de même l'accès à certaines APIs (ex: géolocalisation)</li>
        <li><mark>Applications hébergées</mark> - stockées et servies par un serveur web.
        Facile à mettre à jour, mais a un accès limité aux APIs.</li>
        <li><mark>Applications packagées</mark> - packagées dans des fichiers
        ZIP, elles peuvent être installées depuis n'importe quel site.
        <li><mark>Applications privilégiées</mark> - revues par la Marketplace,
        packagées, et signées par une clé identifiant la Marketplace.</li>
        <li><mark>Applications certifiées</mark> - ces applications font partie
        du système et ne peuvent pas être installées autrement.</li>
      </ul>
      <p class="demourl"><a href="https://developer.mozilla.org/en-US/docs/Apps/App_permissions">App permissions</a></p>
      <small class="credits"><a href="http://julienw.github.io/firefoxos-presentation/html5/firefox-os-presentation-20131112.fr.html">Présentation par Julien Wajsberg et Jérémie Patonnier</a></small>     
    <footer class="notes">
    </footer>
    </section>
  </div></div>



  <div id="fxos-simple-architecture-bis" class="slide cover h"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/fxos_simple_architecture.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>

  <div id="gecko-intro" class="slide"><div>
    <section>
    <header>
      <h2>Gecko</h2>
      </header>

    <ul class="nobull">
      <li><strong>Moteur de rendu</strong> (<i>layout engine</i>)</li>
      <ul>
        <li>Firefox</li>
        <li>Thunderbird</li>
        <li>Firefox OS</li>
      </ul>
    </ul>
    <ul>  
      <li>Prend du contenu (HTML, XML)</li>
      <li>Le formatte (CSS)</li> 
      <li>L'affiche à l'écran</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="gecko-data-flow" class="slide"><div>
    <section>
    <header>Basic data flow
      </header>
      <img src="pictures/cours-ssr/gecko_data_flow.png" 
           class="middle shadow"
           alt="">
      
           <small class="byline">
             <a href="https://developer.mozilla.org/en-US/docs/Introduction_to_Layout_in_Mozilla">more doc</a>
           </small>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="js" class="slide"><div>
    <section>
    <header>Moteur JavaScript (SpiderMonkey)
    </header>
    <p><center>Script Processing Model</center></p>
      <img src="pictures/cours-ssr/JS parser.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    


  <div id="js-ex" class="slide"><div>
    <section> 
      <header>
      <h2>Exemple</h2>
    </header>
    <p>
      <a href="js_execution_example.html">démo</a>
    </p>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    


  <div id="fxos-simple-architecture-ter" class="slide cover h"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/fxos_simple_architecture.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="gonk-intro" class="slide"><div>
    <section>
    <header>
      <h2>Gonk</h2>
      </header>

    <ul class="nobull">
      <li><strong>Couche bas-niveau</strong></li>
      <ul>
        <li>Noyau Linux simplifié</li>
        <li>HAL (Hardware Abstraction Layer)</li>
        <li>Librairies Open Source (libusb, bluez)</li>
        <li>Libraires Android (GPS, caméra)</li>
        <li>Librairies OEM (firmware modem)</li>
      </ul>
      <li><strong>Gecko a été porté sur Gonk</strong> : accès total</li>
        <ul>
          <li>Interfaces exposées : pile téléphone, display frame buffer...</li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   
  
  <div id="fxos-architecture" class="slide cover h"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/FirefoxOS_architecture.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="firefoxos-sec" class="slide oneline"><div>
    <section>
    <header>
      <h2>2. Securité</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="sec-menu" class="slide"><div>
    <section>
    <header>
    <h2>Sécurité de Firefox OS</h2>
      </header>
    <ul class="nobull">
      <li><strong>Hardware</strong></li>
        <ul>
          <li>Remote debugging, hardware hardening</li>
        </ul>
      <li><strong>Système</strong></li> 
        <ul>
          <li>Infrastructure, sandboxing, mises à jour</li>
        </ul> 
      <li><strong>Applications</strong></li>  
        <ul>
          <li>App manifest, permissions, Marketplace</li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="xkcd" class="slide"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/xkcd_security.png" 
           class="middle" height="300"
           alt="">
           <small class="credits">    
        <a href="xkcd.com/538">
          xkcd.com/538
        </a>
      </small>
      <footer class="notes">
      </footer>
    </section>
  </div></div>
  
  <div id="open-sec" class="slide"><div>
    <section>
    <header>
      <h2>Enjeux</h2>
    </header>
    <ul>
      <li><strong>Security by design</strong></li>
        <ul class="nobull">
          <li><strong>Open Source</strong> &lt;&gt; security by obscurity</li>
        </ul>
      <li>Protéger le système sans le fermer</li>
        <ul class="nobull">
          <li>Un système <strong>sécurisé par défaut</strong> pour les utilisateurs</li>
          <li>Un environnement favorable pour les <strong>développeurs d'apps</strong></li>
        </ul>
      <li><strong>Partenaires</strong></li>
        <ul class="nobull">
          <li>Open Source -&gt; code modifié</li>
          <li>Prévention par des choix d'architecture</li>
        </ul>
      <li><strong>Code OEM, drivers hardware</strong></li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="physique?" class="slide"><div>
    <section>
    <header>
      <h2>Vulnérabilitiés physiques</h2>
      <h2>Attaques réseau</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="physique" class="slide"><div>
    <section>
    <header>
      <h2>Vulnérabilités physiques</h2>
    </header>
    <ul>
      <li><strong>Vol</strong></li>
        <ul class="nobull">
          <li>Accès à la mémoire interne, à la carte SD</li>
          <li>Accès au téléphone si pas vérouillé (pin code, lockscreen)</li>
          <li>Accès aux services enregistrés</li>
        </ul>
      <li><strong>Compromission invisible après "emprunt"</strong></li>
        <ul class="nobull">
          <li>Installation d'apps malveillantes (hooks de Web Activities)</li>
          <li>Détournement du trafic (proxy: pas d'UX)</li>
        </ul>
      <li><strong>Visibilité de données privées en public</strong></li>
        <ul class="nobull">
          <li>Mots de passe (lockscreen, pin code, hotspot) visibles</li>
          <li>Visibilité des caractères tapés sur le clavier</li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="réseau" class="slide"><div>
    <section>
    <header>
      <h2>Attaques réseaux</h2>
    </header>
    <ul class="nobull">
      <li><strong>Téléphonie et SMS</strong></li>
      <ul>
        <li>GSM (cf <a href="http://www.youtube.com/watch?v=ZrbatnnRxFc">Wideband GSM Sniffing</a> au 27c3)</li>
        <li>Overflows, features de dev cachées...</li></ul>
      <li><strong>Hotspot WiFi</strong></li>
        <ul>
          <li>Bruteforcing</li>
        </ul>
        <li><strong>Bluetooth</strong></li>
      <ul>
        <li>Parce que le bluetooth est secure</li>
        </ul>
        <li><strong>NFC</strong></li>
        <ul>
          <li>Implémentation critique (paiement)</li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    


  <div id="debugging" class="slide"><div>
    <section>
    <header>
      <h2>Le Remote debugging</h2>
      <h3>Une fonctionnalité critique</h3>
      </header>
    <ul class="nobull">
      <li><strong>Pour les développeurs/ses</strong></li>
      <ul>
        <li>Accès root</li>
        <li>Débugguer des applis certifiées</li>
        <li>Accèder à des préférences ou aux settings des applis</li>
        <li>ADB over WiFi</li>
      </ul>  
      <li><strong>Pour la sécurité</strong></li>
        <ul>
          <li>Protéger le système sans le fermer</li>
          <li>Téléphone rooté ou non</li>
        </ul>  
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="debugging2" class="slide"><div>
    <section>
    <header>
      <h2>Le Remote debugging</h2>
      <h3>Comment protéger ?</h3>
      </header>
    <ul>
      <li><strong>Désactiver</strong> le serveur de debug lorsque l'écran est vérouillé</li>
      <li><strong>Wipe data</strong> à l'activation du remote debugging</li>
      <li>Vérouiller l'accès au remote debugging par un mot de passe / code PIN</li>
      <li>ADB <strong>authentifié</strong></li>
    </ul>  
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="system-sec" class="slide oneline"><div>
    <section>
    <header>
      <h2>Sécurité Système</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   


  <div id="security-framework" class="slide cover h"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/securityframework.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="child-parent-gecko" class="slide"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/child-parent-gecko.png" 
           class="middle"
           height="600px;"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="harware-access" class="slide"><div>
    <section>
    <header>
      <h2>Accès au hardware</h2>
      </header>
    <ul class="nobull">
      <li>Uniquement par les APIs Web</li>
        <ul>
          <li>Implémentées dans Gecko</li>
          <li>Pas d'APIS "natives" ni "back doors"</li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="content-sandbox" class="slide"><div>
    <section>
    <header>
      <h2>Content process sandboxing</h2>
      <h3>Risques</h3>
      </header>
    <ul class="nobull">
      <li>Use case : une faille a été trouvée dans Gecko</li>
      <li>Risques : </li>
      <ul>
          <li>Escalation de privilège (content -&gt; parent process via IPDL)</li> 
          <li>Exploitation de vulnérabilités noyau</li>
          <li>Exploitation d'un bug hardware</li>
        </ul> 
      <li>Probabilité basse</li>  
      <li>Criticité haute</li>  
   </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="content-sandbox2" class="slide"><div>
    <section>
    <header>
    <h2>Content process sandboxing</h2>
    <h3>Seccomp</h3>
      </header>
    <ul class="nobull">
      <li><strong>Seccomp: Secure Computing mode</strong></li>
      <ul>
        <li>Linux kernel &gt; 2.6.12</li>
        <li>Limite les appels système d'un process à <code>read</code>, <code>write</code>, <code>sigreturn</code>, <code>exit</code></li>
        <li>Utilise <code>prctl()</code></li>
        <li>Peut-être démarré après l'init d'un process</li>
        </ul>  
   </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="content-sandbox3" class="slide"><div>
    <section>
    <header>
    <h2>Content process sandboxing</h2>
    <h3>Seccomp-BPF</h3>
      </header>
    <ul class="nobull">
      <li><strong>Seccomp mode filter (or mode 2)</strong></li>
      <ul>
        <li>Linux kernel &gt; 3.5</li>
        <li>Implémente BPF pour filter les appels système</li>
        <li>Utilise une liste blanche d'appels système (plutôt que des fonctions hardcodées)</li>
        <li>Plus flexible</li>
        </ul>  
   </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="content-sandbox4" class="slide"><div>
    <section>
    <header>
    <h2>Content process sandboxing</h2>
    <h3>seccomp_filter.h</h3>
      </header>
    <pre>
    <code>#if defined(__arm__)</code>
    <code>#define SECCOMP_WHITELIST_ARCH_HIGH \</code>
    <code>  ALLOW_SYSCALL(msgget), \</code>
    <code>  ALLOW_SYSCALL(recv), \</code>
    <code>  ALLOW_SYSCALL(mmap2),</code>
    <code>#endif</code>
    </pre>  
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="system-update" class="slide"><div>
    <section>
    <header>
    <h2>Mises à jour Système</h2>
    <h3>Risques</h3>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="system-update1" class="slide"><div>
    <section>
    <header>
    <h2>Mises à jour Système</h2>
    <h3>Risques</h3>
    </header>
    <ul>
      <li>Paquets de mise à jour compromis</li>
      <li>Processus de vérification de mise à jour compromis</li>  
      <li>Etat du système corrompu ou inconnu pendant la mise à jour</li>  
      <li>Vulnérabilité dans le mécanisme de mise à jour</li>  
      <li>Paquets vulnérables non mis à jour</li>  
   </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="system-update2" class="slide"><div>
    <section>
    <header>
    <h2>Mises à jour Système</h2>
    </header>
    <ul>
      <li>Patchs et mises à jour buildés, testés, signés et distribués par l'OEM</li>  
      <li><strong>Firmware Over The Air Updates (FOTA)</strong></li>
      <ul class="nobull">
        <li>Si changements dans Gonk</li>
        <li>Peut être utilisé pour tout: drivers, firmware, settings, security updates, Gaia, Gecko</li>
      </ul>  
      <li><strong>Mozilla System Update utility (MSU)</strong></li>
        <ul class="nobull">
          <li>Même processus, framework que pour Firefox Desktop: Mozilla ARchive (MAR)</li>
        </ul>  
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  

  <div id="system-update3" class="slide"><div>
    <section>
    <header>
    <h2>Mises à jour Système</h2>
    <h3>Update Service</h3>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  

  <div id="system-update4" class="slide"><div>
    <section>
    <header>
    <h2>Mises à jour Système</h2>
    <h3>Update Service</h3>
    </header>
    <ul>
      <li>Vérification de :</li>
        <ul class="nobull">
          <li><strong>Origine</strong> de la MàJ et du manifest (protocol:domain:port)</li>
          <li><strong>Intégrité</strong> du fichier (SHA-256)</li>
          <li><strong>Signature</strong> du code (certificat vérifié)</li>
        </ul>
        <li>Connexion <strong>SSL</strong></li>
      <li>Téléchargement complets des paquets dans un endroit sécurisé avant le début de la MàJ</li>
      <li>MàJ dans un état "sécurisé" (pas de web apps en marche)</li>
      <li>Stockage des clés dans un endroit sécurisé</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="applications" class="slide oneline"><div>
    <section>
    <header>
      <h2>Applications</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="app-sandbox" class="slide"><div>
    <section>
    <header><h2>Application Sandbox</h2>
      </header>
      <img src="pictures/cours-ssr/sandbox.png" 
           class="middle"
           height="400px;"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="app-sandbox2" class="slide"><div>
    <section>
    <header><h2>Application Sandbox</h2>
    </header>
    <ul>
      <li>Données stockées <strong>par application</strong>: cookie, données, locaStorage, IndexedDB, permissions (y compris pour des iframes de même origine)</li>
      <li>Une application <strong>ne peut pas ouvrir</strong> une autre app (iframe, url) </li>
      <li><strong>Permissions sanboxées</strong> (ex: autorisation d'utiliser la géolocalisation)</li>
      <li><strong>Sandboxing de l'API Browser</strong>: deuxième sandbox pour du contenu ouvert qui serait ouvert</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
</div></div>    

  <div id="app-sandbox3" class="slide"><div>
    <section>
    <header><h2>Application Sandbox</h2>
    <h3>Inconvénients</h3>
    </header>
    <ul class="bull">
      <li>Nécessité de se reloguer sur un même service, de gérer les autorisations plusieurs fois</li>
      <li>Duplication des données stockées depuis un même site</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
</div></div>    


  <div id="app-sandbox4" class="slide"><div>
    <section>
    <header><h2>Application Sandbox</h2>
    <h3>Avantages</h3>
    </header>
    <ul>
      <li><strong>Stabilité</strong> du modèle : pas d'intéraction entre apps via un tiers, pas de problème à l'installation, suppression des apps (données supprimées)</li>
      <li><strong>Pas d'attaques inter-apps</strong></li>
      <li><strong>Données privées</strong> : pas de traçage d'une app et de ses données depuis une autre</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
</div></div>    



  <div id="infra" class="slide"><div>
    <section>
    <header>
      <h2>Infrastructure</h2>
      </header>
    <ul class="nobull">
      <li>Permission Manager</li>
        <ul>
          <li></li>
          <li></li>
        </ul>
      <li>Access Control List</li>
        <ul>
          <li></li>
          <li></li>
        </ul>
      <li>Credential Validation</li>
        <ul>
          <li></li>
          <li></li>
        </ul>
      <li>Permission Store</li>
        <ul>
          <li></li>
          <li></li>
        </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="security-framework-app" class="slide cover h"><div>
    <section>
    <header>
      </header>
      <img src="pictures/cours-ssr/securityframework.png" 
           class="middle shadow"
           alt="">
    <footer class="notes">
    </footer>
    </section>
  </div></div>   


  <div id="types" class="slide"><div>
    <section>
    <header>
    <h2>Indice de confiance</h2>
    </header>
    <ul class="nobull">
      <li>Application : </li>
      <ul>
        <li><strong>Certified</strong>: ++ <i>(higly trusted)</i></li>
        <li><strong>Privileged</strong>: + <i>(trusted)</i></li>
        <li><strong>Web</strong>: - <i>(untrusted)</i></li>
      </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="permissions" class="slide"><div>
    <section>
    <header>
    <h2>Principe du minimum de permissions</h2>
    </header>
    <ul>
      <li><i>Principe of least permissions</i></li>
      <li>Commencer avec le <strong>minimum vital de permissions</strong></li>
      <li>Le Manifest liste les permissions supplémentaires à donner par Gecko</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="review" class="slide"><div>
    <section>
    <header>
    <h2>Revue des applications privilégiées par le Marketplace</h2>
    </header>
    <ul>
      <li>Une app <strong>doit être revue</strong> par le Marketplace pour être de type "privilégié"</li>
      <li>L'app est alors numériquement <strong>signée</strong> par le Marketplace</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="paquets" class="slide"><div>
    <section>
    <header>
    <h2>Applications hostées ou packagées</h2>
    </header>
    <ul>
      <li>Packagée</li>
      <ul class="nobull">
        <li>Fichier <strong>ZIP signé</strong></li>
        <li>Les apps certifiées et privilégiées DOIVENT être packagées</li>
        <li>Stockage des données, assets, source <strong>en local</strong></li>
      </ul>
      <li>Hostée</li>
      <ul class="nobull">
        <li>Seul le manifest est installé sur le téléphone</li>
        <li>Contient l'URL vers la page de démarrage de l'app</li>
        <li>L'app est traité comme du contenu web : <strong>stockée à distance</strong>, récupéré par HTTP</li>
        <li></li>
      </ul>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="manifest-sec1" class="slide"><div>
    <section>
    <header>
    <h2>Configuration du manifest</h2>
    <h3>Aspects securité</h3>
    </header>
    <ul class="nobull">
      <li><strong>Permissions</strong></li>
      <ul>
        <li><strong>Description</strong> : le nom de la permission. Obligatoire.</li>
        <li><strong>Droits d'accès</strong> : read, readwrite, readcreate, createonly. Obligatoire pour certaines APIs seulement.</li>
        <li><strong>Table des permissions dans Gecko</strong> : <a href="https://mxr.mozilla.org/mozilla-central/source/dom/apps/src/PermissionsTable.jsm">PermissionTable.jsm</a></li>
        <li><strong>Permissions implicites</strong> : obtenus automatiquement par l'app à l'installation</li>
      </ul>  
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="manifest-sec2" class="slide"><div>
    <section>
    <header>
    <h2>Configuration du manifest</h2>
    <h3>Aspects securité</h3>
    </header>
    <ul class="nobull">
      <li><strong>installs_allowed_from</strong></li>
      <ul>
        <li>Origine de l'app</li>
        <li>Seules les origines spécifiées peuvent installer l'app</li>
        <li>Permet aux fournisseurs de l'app de restreindre les apps à un Marketplace autorisé</li>
      </ul>  
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="manifest-sec3" class="slide"><div>
    <section>
    <header>
    <h2>Configuration du manifest</h2>
    <h3>Aspects securité</h3>
    </header>
    <ul class="nobull">
      <li><strong>Content Security Policy</strong></li>
      <ul>
        <li>Appliquée à toutes les pages chargées de l'app</li>
        <li>Ne peut que renforcer la CSP appliquée par défaut</li>
      </ul>  
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="csp" class="slide"><div>
    <section>
    <header>
    <h2>Content Security Policy</h2>
    </header>
    <ul class="nobull">
      <li><a href="https://developer.mozilla.org/en-US/Apps/CSP">cf MDN</a></li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="xss" class="slide"><div>
    <section>
    <header>
    <h2>DOM-based XSS</h2>
    </header>
    <ul class="nobull">
      <li><a href="https://www.owasp.org/index.php/DOM_Based_XSS">Rappels</a></li>
      <li><a href="https://www.owasp.org/index.php/DOM_based_XSS_Prevention_Cheat_Sheet">Prévention</a> : <strong>échapper les données utilisateurs</strong>.</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="indexeddb" class="slide"><div>
    <section>
    <header>
    <h2>IndexedDB</h2>
    </header>
    <ul class="nobull">
      <li>Base clé/valeur</li>
      <li>Pas de risque de SQLi</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="users-permissions" class="slide"><div>
    <section>
    <header>
    <h2>Gestion des permissions par l'utilisateur</h2>
    </header>
    <ul>
      <li>Demande d'autorisation au moment où l'app a besoin d'une permission</li>
      <li><i>data usage intention</i></li>
      <li>Onglet dans "Settings" : gestion des permissions par app</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="privacy" class="slide"><div>
    <section>
    <header>
      <h2>Protection des données privées</h2>
      </header>
    <ul>
      <li><a href="https://developer.mozilla.org/en-US/docs/The_Do_Not_Track_Field_Guide/Introduction">Do Not Track</a></li>
      <li><a href="https://developer.mozilla.org/en-US/Apps/Publishing/Privacy_Policies_for_Open_Web_Apps">Privacy Policy for Open Web Apps</a></li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="enjeux" class="slide"><div>
    <section>
    <header>
    <h2>Enjeux</h2>
    </header>
    <ul>
      <li>Fournir l'accès de permissions certifiées (caméra) à des apps privilégiées</li>
      <li>Revues de sécurité dans le Marketplace (cf <a href="http://defreez.bitbucket.org/ecs235a/project/defreez_ecs235a.pdf">quelques résultats</a>) </li>
      <li>Devtools</li>
      <li>Renforcement de la sécurité de FxOS : notamment au niveau du chiffrement</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="webcrypto" class="slide"><div>
    <section>
    <header>
    <h2>Framework de Cryptographie</h2>
    </header>
    <ul>
      <li>Crypto Worker (encryption primitives)</li>
      <li>WebCrypto API (non-user related encryption)</li>
      <li>IndexedDB encryption</li>
      <li>Full disk encryption (data partition, optionnally SD card</li>
      <li>A "trust core" in Gonk for key storage, keys derivation, signing and encrypting data to user and/or device</li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    
  
  <div id="contribuer" class="slide"><div>
    <section>
    <header>
      <h2>Contribuer</h2>
    </header>
    <ul>
      <li>Les revues de sécurité et les meetings sont publics: <a href="https://wiki.mozilla.org/Security/B2G">infos</a></li>
      <li><a href="https://wiki.mozilla.org/Security/Contributors">Contribuer</a>: trouver corriger un bug de sécu, commiter pour un outil de sécu</li> 
      <li><a href="https://etherpad.mozilla.org/SecurityAutomationMeeting">Security Automation Tools : ZAP, Minion...</a></li>
      <li><a href="Bugs mentorés: http://www.joshmatthews.net/bugsahoy/?b2g=1">Bugs mentorés</a>, <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=923920">quelques bugs de sécu</a></li>
      <li>Comment contribuer: <a href="https://developer.mozilla.org/en-US/docs/Introduction">Guidelines</a></li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="tp" class="slide oneline"><div>
    <section>
    <header>
      <h2>TP</h2>
    </header>
    <footer class="notes">
    </footer>
    </section>
  </div></div>   

  <div id="tp-infos" class="slide"><div>
    <section>
    <header>
      <h2>Revue de sécurité d'une web app</h2>
      </header>
    <ul>
      <li>Infos pour le TP: <a href="tp-ssr.html">énoncé</a></li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div id="contact" class="slide"><div>
    <section>
    <header>
      <h2>Contact</h2>
      </header>
    <ul>
      <li>Stéphanie Ouillon</li>
      <li>Slides: <a href="http://arroway.github.io/mozilla-presentation-templates/html5/cours-ssr.html">http://arroway.github.io/mozilla-presentation-templates/html5/cours-ssr.html</a></li>
      <li>Github: <a href="https://github.com/arroway">arroway</a></li>
      <li>arroway@mozilla.com</li>
      <li><a href="https://twitter.com/steph_ouillon">@steph_ouillon</a></li>
    </ul>
    <footer class="notes">
    </footer>
    </section>
  </div></div>    

  <div class="progress"><div></div></div>
  <script src="scripts/script.js"></script>
  <!-- Copyright © 2010–2012 Vadim Makeev — pepelsbey.net -->
</body>
</html>
